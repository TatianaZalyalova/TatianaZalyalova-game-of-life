(function(){"use strict";var __webpack_modules__={272:function(){eval('\n;// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n;// CONCATENATED MODULE: ./src/Game.ts\n\nvar Game = function Game(gameField, gameView) {\n  _classCallCheck(this, Game);\n\n  var state = gameField.getState();\n  var inputRange = document.querySelector(".field-speed");\n  var stepDurationMs;\n\n  if (inputRange) {\n    stepDurationMs = Number(inputRange.value);\n  }\n\n  var isGameRun = false;\n  var buttonClean = document.querySelector(".clean-button");\n\n  if (buttonClean) {\n    buttonClean.addEventListener("click", function () {\n      var allLiveCells = document.querySelectorAll(".cell.cell--alive");\n      allLiveCells.forEach(function (item) {\n        item.classList.remove("cell--alive");\n      });\n\n      for (var i = 0; i < gameField.arrState.length; i++) {\n        for (var j = 0; j < gameField.arrState[i].length; j++) {\n          if (gameField.arrState[i][j] === 1) {\n            gameField.arrState[i][j] = 0;\n          }\n        }\n      }\n    });\n  }\n\n  gameView.updateGameField(state);\n  gameView.updateGameState({\n    height: state.length,\n    isRunning: false,\n    width: state[0].length\n  });\n  gameView.onCellClick(function (y, x) {\n    gameField.toggleCellState(y, x);\n    gameView.updateGameField(gameField.getState());\n  });\n  gameView.onFieldSizeChange(function (width, height) {\n    gameField.setSize(width, height);\n    var newState = gameField.getState();\n    gameView.updateGameField(newState);\n    gameView.updateGameState({\n      height: newState.length,\n      width: newState[0].length\n    });\n  });\n  gameView.onGameStateChange(function (gameRunState) {\n    gameView.updateGameState({\n      isRunning: gameRunState\n    });\n    isGameRun = gameRunState;\n\n    if (buttonClean) {\n      buttonClean.disabled = true;\n    }\n  });\n\n  function tick() {\n    if (isGameRun) {\n      var numberOfLivingCells = document.querySelectorAll(".cell.cell--alive").length;\n      var stateCorrent = gameField.nextGeneration();\n\n      if (numberOfLivingCells === 0 || stateCorrent === false) {\n        isGameRun = false;\n        gameView.updateGameState({\n          isRunning: isGameRun\n        });\n\n        if (gameField.arrStateBefore) {\n          gameField.arrStateBefore.length = 0;\n        }\n\n        if (buttonClean) {\n          buttonClean.disabled = false;\n        }\n      } else {\n        gameView.updateGameField(gameField.getState());\n        inputRange === null || inputRange === void 0 ? void 0 : inputRange.addEventListener("change", function () {\n          clearInterval(interval);\n          stepDurationMs = Number(inputRange.value);\n          interval = setInterval(tick, stepDurationMs);\n        });\n      }\n    }\n  }\n\n  var interval = setInterval(tick, stepDurationMs);\n};\n;// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if ("value" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n;// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n;// CONCATENATED MODULE: ./src/GameField.ts\n\n\n\nvar GameField = /*#__PURE__*/function () {\n  function GameField() {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    _classCallCheck(this, GameField);\n\n    _defineProperty(this, "arrStateBefore", [""]);\n\n    this.width = width;\n    this.height = height;\n    this.arrState = this.getState();\n  }\n\n  _createClass(GameField, [{\n    key: "nextGeneration",\n    value: function nextGeneration() {\n      var _this = this;\n\n      this.getArrStateBefore(this.arrStateBefore);\n      var nextGenerationArr = this.arrState.map(function (row, y) {\n        return row.map(function (cell, x) {\n          return _this.getNextCellState(x, y);\n        });\n      });\n      var nextGenerationArrStr = nextGenerationArr.join("");\n\n      if (this.arrStateBefore.includes(nextGenerationArrStr)) {\n        return false;\n      } else {\n        this.arrState = nextGenerationArr;\n      }\n    }\n  }, {\n    key: "getArrStateBefore",\n    value: function getArrStateBefore(arrStateBefore) {\n      if (arrStateBefore.indexOf(this.getState().join("")) === -1) {\n        arrStateBefore.push(this.getState().join(""));\n      }\n\n      if (arrStateBefore.length >= 3) {\n        arrStateBefore.shift();\n      }\n    }\n  }, {\n    key: "getState",\n    value: function getState() {\n      if (this.arrState) {\n        return this.arrState;\n      } else {\n        var arr = [];\n\n        for (var i = 0; i < this.height; i++) {\n          var arrItem = [];\n\n          for (var j = 0; j < this.width; j++) {\n            arrItem.push(0);\n          }\n\n          arr.push(arrItem);\n        }\n\n        return arr;\n      }\n    }\n  }, {\n    key: "toggleCellState",\n    value: function toggleCellState(x, y) {\n      this.arrState[y][x] = this.arrState[y][x] === 0 ? 1 : 0;\n      return this.arrState;\n    }\n  }, {\n    key: "isCellAlive",\n    value: function isCellAlive(x, y) {\n      if (y < 0 || y >= this.arrState.length || x < 0 && x < this.arrState[y].length) {\n        return false;\n      }\n\n      return Boolean(this.arrState[y][x]);\n    }\n  }, {\n    key: "getNumberOfNeighbour",\n    value: function getNumberOfNeighbour(x, y) {\n      var num = 0;\n\n      for (var i = y - 1; i <= y + 1; i++) {\n        for (var k = x - 1; k <= x + 1; k++) {\n          if (i === y && k === x) {\n            continue;\n          }\n\n          num += Number(this.isCellAlive(k, i));\n        }\n      }\n\n      return num;\n    }\n  }, {\n    key: "getNextCellState",\n    value: function getNextCellState(x, y) {\n      var liveCount = this.getNumberOfNeighbour(x, y);\n      var isAlive = this.isCellAlive(x, y);\n\n      if (isAlive && (liveCount === 3 || liveCount === 2) || liveCount === 3) {\n        return 1;\n      }\n\n      return 0;\n    }\n  }, {\n    key: "setSize",\n    value: function setSize(newWidth, newHeight) {\n      for (var i = 0; i < this.arrState.length; i++) {\n        for (var k = this.arrState[i].length; k < newWidth; k++) {\n          this.arrState[i][k] = 0;\n        }\n\n        if (newWidth < this.arrState[i].length) {\n          this.arrState[i].splice(newWidth, this.arrState[i].length - newWidth);\n        }\n      }\n\n      if (newHeight < this.arrState.length) {\n        this.arrState.splice(newHeight, this.arrState.length - newHeight);\n      }\n\n      for (var _i = this.arrState.length; _i < newHeight; _i++) {\n        var arr = [];\n\n        for (var j = 0; j < newWidth; j++) {\n          arr.push(0);\n        }\n\n        this.arrState.push(arr);\n      }\n    }\n  }]);\n\n  return GameField;\n}();\n;// CONCATENATED MODULE: ./src/GameView.ts\n\n\nvar GameView = /*#__PURE__*/function () {\n  function GameView(el) {\n    _classCallCheck(this, GameView);\n\n    var gameField = document.createElement("div");\n    gameField.classList.add("gameField");\n    el.appendChild(gameField);\n    var gameControls = document.createElement("div");\n    gameControls.classList.add("gameControls");\n    el.appendChild(gameControls);\n    var buttonStopped = document.createElement("button");\n    buttonStopped.classList.add("run-button");\n    buttonStopped.classList.add("run-button--stopped");\n    buttonStopped.innerHTML = "Play";\n    gameControls.appendChild(buttonStopped);\n    var buttonClean = document.createElement("button");\n    buttonClean.classList.add("clean-button"); //buttonStopped.classList.add("run-button--stopped");\n    //buttonClean.disabled = true;\n\n    buttonClean.innerHTML = "Clean";\n    gameControls.appendChild(buttonClean);\n    var inputSizeWidth = document.createElement("input");\n    inputSizeWidth.classList.add("field-size");\n    inputSizeWidth.classList.add("field-size--width");\n    inputSizeWidth.setAttribute("type", "number");\n    gameControls.appendChild(inputSizeWidth);\n    var inputSizeHeight = document.createElement("input");\n    inputSizeHeight.classList.add("field-size");\n    inputSizeHeight.classList.add("field-size--height");\n    inputSizeHeight.setAttribute("type", "number");\n    gameControls.appendChild(inputSizeHeight);\n    var inputSpeed = document.createElement("input");\n    inputSpeed.classList.add("field-speed");\n    inputSpeed.setAttribute("type", "range");\n    inputSpeed.setAttribute("min", "1");\n    inputSpeed.setAttribute("max", "5000");\n    inputSpeed.setAttribute("step", "10");\n    inputSpeed.value = "500";\n    gameControls.appendChild(inputSpeed);\n    this.el = el;\n  }\n\n  _createClass(GameView, [{\n    key: "updateGameField",\n    value: function updateGameField(field) {\n      var gameFieldEl = this.el.querySelector(".gameField");\n      gameFieldEl.innerHTML = "<table>\\n      <tbody>".concat(field.map(function (row, y) {\n        return "<tr>".concat(row.map(function (cell, x) {\n          return "<td class=\\"cell cell--".concat(cell ? "alive" : "dead", "\\"></td>");\n        }).join(""), "\\n        </tr>");\n      }).join(""), "\\n      </tbody>\\n    </table>");\n    }\n  }, {\n    key: "updateGameState",\n    value: function updateGameState(state) {\n      var buttonRun = this.el.querySelector(".run-button");\n      var inputSizeHeight = this.el.querySelector("input.field-size--height");\n      var inputSizeWidth = this.el.querySelector("input.field-size--width");\n\n      if (state.isRunning) {\n        buttonRun === null || buttonRun === void 0 ? void 0 : buttonRun.classList.remove("run-button--stopped");\n        buttonRun === null || buttonRun === void 0 ? void 0 : buttonRun.classList.add("run-button--runned");\n        buttonRun.innerHTML = "Stop";\n      } else {\n        buttonRun === null || buttonRun === void 0 ? void 0 : buttonRun.classList.remove("run-button--runned");\n        buttonRun === null || buttonRun === void 0 ? void 0 : buttonRun.classList.add("run-button--stopped");\n        buttonRun.innerHTML = "Play";\n      }\n\n      if (!(state.width === undefined || state.height === undefined)) {\n        inputSizeWidth.value = state.width.toString();\n        inputSizeHeight.value = state.height.toString();\n      }\n    }\n  }, {\n    key: "onCellClick",\n    value: function onCellClick(cb) {\n      var gameFieldEl = this.el.querySelector(".gameField");\n\n      function callCbWithArgs(el) {\n        if (el.target.tagName === "TD") {\n          var _y = el.target.cellIndex;\n          var _x = el.target.closest("tr").rowIndex;\n          cb(_y, _x);\n        }\n      }\n\n      gameFieldEl.addEventListener("click", callCbWithArgs, true);\n    }\n  }, {\n    key: "onGameStateChange",\n    value: function onGameStateChange(cb) {\n      var buttonRun = this.el.querySelector(".run-button");\n\n      function callCbStateChange(el) {\n        var newState = buttonRun.classList.contains("run-button--stopped");\n        cb(newState);\n      }\n\n      buttonRun.addEventListener("click", callCbStateChange);\n    }\n  }, {\n    key: "onFieldSizeChange",\n    value: function onFieldSizeChange(cb) {\n      var inputWidth = this.el.querySelector(".field-size.field-size--width");\n      var inputHeight = this.el.querySelector(".field-size.field-size--height");\n      var el = this.el;\n\n      function cbSizeChange() {\n        var width = Number(inputWidth.value);\n        var height = Number(inputHeight.value);\n\n        if (width > 0 && height > 0) {\n          cb(width, height);\n        }\n      }\n\n      inputWidth.addEventListener("change", cbSizeChange, true);\n      inputHeight.addEventListener("change", cbSizeChange, true);\n    }\n  }]);\n\n  return GameView;\n}();\n;// CONCATENATED MODULE: ./src/index.ts\n\n\n\n\nvar el = document.getElementById("app");\nvar gameView = new GameView(el);\nvar gameField = new GameField(5, 5);\nnew Game(gameField, gameView);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBRkEsUUFBRSxDQUFGQTtBQUNEOztBQUVERCxNQUFBQSxTQUFTLENBQVRBLGdCQUFBQSxDQUFBQSxPQUFBQSxFQUFBQSxpQkFBQUE7QUFDRDtBQW5ISDtBQUFBO0FBQUEsV0FxSEUsK0JBQStEO0FBQzdELFVBQU1FLFVBQVUsR0FBRyxzQkFBbkIsK0JBQW1CLENBQW5CO0FBR0EsVUFBTUMsV0FBVyxHQUFHLHNCQUFwQixnQ0FBb0IsQ0FBcEI7QUFHQSxVQUFNWCxFQUFlLEdBQUcsS0FBeEI7O0FBQ0EsOEJBQXdCO0FBQ3RCLFlBQU16QixLQUFhLEdBQUdWLE1BQU0sQ0FBQzZDLFVBQVUsQ0FBdkMsS0FBNEIsQ0FBNUI7QUFDQSxZQUFNckMsTUFBYyxHQUFHUixNQUFNLENBQUM4QyxXQUFXLENBQXpDLEtBQTZCLENBQTdCOztBQUNBLFlBQUlwQyxLQUFLLEdBQUxBLENBQUFBLElBQWFGLE1BQU0sR0FBdkIsR0FBNkI7QUFDM0JvQyxVQUFBQSxFQUFFLFFBQUZBLE1BQUUsQ0FBRkE7QUFDRDtBQUNGOztBQUNEQyxNQUFBQSxVQUFVLENBQVZBLGdCQUFBQSxDQUFBQSxRQUFBQSxFQUFBQSxZQUFBQSxFQUFBQSxJQUFBQTtBQUNBQyxNQUFBQSxXQUFXLENBQVhBLGdCQUFBQSxDQUFBQSxRQUFBQSxFQUFBQSxZQUFBQSxFQUFBQSxJQUFBQTtBQUNEO0FBdElIOztBQUFBO0FBQUEsSTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElBQU1YLEVBQUUsR0FBR3JDLFFBQVEsQ0FBUkEsY0FBQUEsQ0FBWCxLQUFXQSxDQUFYO0FBRUEsSUFBTVMsUUFBUSxHQUFHLGFBQWpCLEVBQWlCLENBQWpCO0FBQ0EsSUFBTVgsU0FBUyxHQUFHLGlCQUFsQixDQUFrQixDQUFsQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1mb3JlY2FzdC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcz8yYjRjIiwid2VicGFjazovL3dlYXRoZXItZm9yZWNhc3QvLi9zcmMvR2FtZS50cz82ZDQ3Iiwid2VicGFjazovL3dlYXRoZXItZm9yZWNhc3QvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanM/NzdmMSIsIndlYnBhY2s6Ly93ZWF0aGVyLWZvcmVjYXN0Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzP2U0ZmQiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mb3JlY2FzdC8uL3NyYy9HYW1lRmllbGQudHM/OGEzYyIsIndlYnBhY2s6Ly93ZWF0aGVyLWZvcmVjYXN0Ly4vc3JjL0dhbWVWaWV3LnRzPzRjZTkiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mb3JlY2FzdC8uL3NyYy9pbmRleC50cz9mZmI0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59IiwiaW1wb3J0IHsgR2FtZUZpZWxkLCBJR2FtZUZpZWxkIH0gZnJvbSBcIi4vR2FtZUZpZWxkXCI7XG5pbXBvcnQgeyBHYW1lVmlldywgSUdhbWVWaWV3IH0gZnJvbSBcIi4vR2FtZVZpZXdcIjtcblxuZXhwb3J0IGNsYXNzIEdhbWUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBnYW1lRmllbGQ6IElHYW1lRmllbGQgfCBHYW1lRmllbGQsXG4gICAgZ2FtZVZpZXc6IElHYW1lVmlldyB8IEdhbWVWaWV3XG4gICkge1xuICAgIGNvbnN0IHN0YXRlID0gZ2FtZUZpZWxkLmdldFN0YXRlKCk7XG4gICAgY29uc3QgaW5wdXRSYW5nZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5maWVsZC1zcGVlZFwiXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGxldCBzdGVwRHVyYXRpb25NcyE6IG51bWJlcjtcbiAgICBpZiAoaW5wdXRSYW5nZSkge1xuICAgICAgc3RlcER1cmF0aW9uTXMgPSBOdW1iZXIoaW5wdXRSYW5nZS52YWx1ZSk7XG4gICAgfVxuICAgIGxldCBpc0dhbWVSdW4gPSBmYWxzZTtcbiAgICBjb25zdCBidXR0b25DbGVhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jbGVhbi1idXR0b25cIlxuICAgICkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgaWYgKGJ1dHRvbkNsZWFuKSB7XG4gICAgICBidXR0b25DbGVhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBhbGxMaXZlQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGwuY2VsbC0tYWxpdmVcIik7XG4gICAgICAgIGFsbExpdmVDZWxscy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiY2VsbC0tYWxpdmVcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZUZpZWxkLmFyclN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lRmllbGQuYXJyU3RhdGVbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChnYW1lRmllbGQuYXJyU3RhdGVbaV1bal0gPT09IDEpIHtcbiAgICAgICAgICAgICAgZ2FtZUZpZWxkLmFyclN0YXRlW2ldW2pdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGdhbWVWaWV3LnVwZGF0ZUdhbWVGaWVsZChzdGF0ZSk7XG4gICAgZ2FtZVZpZXcudXBkYXRlR2FtZVN0YXRlKHtcbiAgICAgIGhlaWdodDogc3RhdGUubGVuZ3RoLFxuICAgICAgaXNSdW5uaW5nOiBmYWxzZSxcbiAgICAgIHdpZHRoOiBzdGF0ZVswXS5sZW5ndGgsXG4gICAgfSk7XG4gICAgZ2FtZVZpZXcub25DZWxsQ2xpY2soZnVuY3Rpb24gKHk6IG51bWJlciwgeDogbnVtYmVyKSB7XG4gICAgICBnYW1lRmllbGQudG9nZ2xlQ2VsbFN0YXRlKHksIHgpO1xuICAgICAgZ2FtZVZpZXcudXBkYXRlR2FtZUZpZWxkKGdhbWVGaWVsZC5nZXRTdGF0ZSgpKTtcbiAgICB9KTtcbiAgICBnYW1lVmlldy5vbkZpZWxkU2l6ZUNoYW5nZShmdW5jdGlvbiAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgIGdhbWVGaWVsZC5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSBnYW1lRmllbGQuZ2V0U3RhdGUoKTtcbiAgICAgIGdhbWVWaWV3LnVwZGF0ZUdhbWVGaWVsZChuZXdTdGF0ZSk7XG4gICAgICBnYW1lVmlldy51cGRhdGVHYW1lU3RhdGUoe1xuICAgICAgICBoZWlnaHQ6IG5ld1N0YXRlLmxlbmd0aCxcbiAgICAgICAgd2lkdGg6IG5ld1N0YXRlWzBdLmxlbmd0aCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZ2FtZVZpZXcub25HYW1lU3RhdGVDaGFuZ2UoZnVuY3Rpb24gKGdhbWVSdW5TdGF0ZTogYm9vbGVhbikge1xuICAgICAgZ2FtZVZpZXcudXBkYXRlR2FtZVN0YXRlKHtcbiAgICAgICAgaXNSdW5uaW5nOiBnYW1lUnVuU3RhdGUsXG4gICAgICB9KTtcbiAgICAgIGlzR2FtZVJ1biA9IGdhbWVSdW5TdGF0ZTtcbiAgICAgIGlmIChidXR0b25DbGVhbikge1xuICAgICAgICBidXR0b25DbGVhbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB0aWNrKCk6IHZvaWQge1xuICAgICAgaWYgKGlzR2FtZVJ1bikge1xuICAgICAgICBjb25zdCBudW1iZXJPZkxpdmluZ0NlbGxzOiBudW1iZXIgfCBudWxsID1cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGwuY2VsbC0tYWxpdmVcIikubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGF0ZUNvcnJlbnQgPSBnYW1lRmllbGQubmV4dEdlbmVyYXRpb24oKTtcbiAgICAgICAgaWYgKG51bWJlck9mTGl2aW5nQ2VsbHMgPT09IDAgfHwgc3RhdGVDb3JyZW50ID09PSBmYWxzZSkge1xuICAgICAgICAgIGlzR2FtZVJ1biA9IGZhbHNlO1xuICAgICAgICAgIGdhbWVWaWV3LnVwZGF0ZUdhbWVTdGF0ZSh7XG4gICAgICAgICAgICBpc1J1bm5pbmc6IGlzR2FtZVJ1bixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZ2FtZUZpZWxkLmFyclN0YXRlQmVmb3JlKSB7XG4gICAgICAgICAgICBnYW1lRmllbGQuYXJyU3RhdGVCZWZvcmUubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGJ1dHRvbkNsZWFuKSB7XG4gICAgICAgICAgICBidXR0b25DbGVhbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYW1lVmlldy51cGRhdGVHYW1lRmllbGQoZ2FtZUZpZWxkLmdldFN0YXRlKCkpO1xuICAgICAgICAgIGlucHV0UmFuZ2U/LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICBzdGVwRHVyYXRpb25NcyA9IE51bWJlcihpbnB1dFJhbmdlLnZhbHVlKTtcbiAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwodGljaywgc3RlcER1cmF0aW9uTXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKHRpY2ssIHN0ZXBEdXJhdGlvbk1zKTtcbiAgfVxufVxuIiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufSIsImV4cG9ydCBpbnRlcmZhY2UgSUdhbWVGaWVsZCB7XG4gIGdldFN0YXRlOiAoKSA9PiBudW1iZXJbXVtdO1xuICB0b2dnbGVDZWxsU3RhdGU6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gdm9pZDtcbiAgbmV4dEdlbmVyYXRpb246ICgpID0+IHZvaWQ7XG4gIHNldFNpemU6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZDtcbiAgYXJyU3RhdGU6IG51bWJlcltdW107XG4gIGFyclN0YXRlQmVmb3JlOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVGaWVsZCBpbXBsZW1lbnRzIElHYW1lRmllbGQge1xuICB3aWR0aDtcbiAgaGVpZ2h0O1xuICBhcnJTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyID0gMCwgaGVpZ2h0OiBudW1iZXIgPSAxKSB7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuYXJyU3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG4gIH1cbiAgYXJyU3RhdGVCZWZvcmUgPSBbXCJcIl07XG5cbiAgbmV4dEdlbmVyYXRpb24oKSB7XG4gICAgdGhpcy5nZXRBcnJTdGF0ZUJlZm9yZSh0aGlzLmFyclN0YXRlQmVmb3JlKTtcbiAgICBjb25zdCBuZXh0R2VuZXJhdGlvbkFyciA9IHRoaXMuYXJyU3RhdGUubWFwKChyb3csIHkpID0+XG4gICAgICByb3cubWFwKChjZWxsLCB4KSA9PiB0aGlzLmdldE5leHRDZWxsU3RhdGUoeCwgeSkpXG4gICAgKTtcbiAgICBjb25zdCBuZXh0R2VuZXJhdGlvbkFyclN0cjogc3RyaW5nID0gbmV4dEdlbmVyYXRpb25BcnIuam9pbihcIlwiKTtcbiAgICBpZiAodGhpcy5hcnJTdGF0ZUJlZm9yZS5pbmNsdWRlcyhuZXh0R2VuZXJhdGlvbkFyclN0cikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcnJTdGF0ZSA9IG5leHRHZW5lcmF0aW9uQXJyO1xuICAgIH1cbiAgfVxuXG4gIGdldEFyclN0YXRlQmVmb3JlKGFyclN0YXRlQmVmb3JlOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGlmIChhcnJTdGF0ZUJlZm9yZS5pbmRleE9mKHRoaXMuZ2V0U3RhdGUoKS5qb2luKFwiXCIpKSA9PT0gLTEpIHtcbiAgICAgIGFyclN0YXRlQmVmb3JlLnB1c2godGhpcy5nZXRTdGF0ZSgpLmpvaW4oXCJcIikpO1xuICAgIH1cbiAgICBpZiAoYXJyU3RhdGVCZWZvcmUubGVuZ3RoID49IDMpIHtcbiAgICAgIGFyclN0YXRlQmVmb3JlLnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdGUoKTogbnVtYmVyW11bXSB7XG4gICAgaWYgKHRoaXMuYXJyU3RhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFyclN0YXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhcnI6IG51bWJlcltdW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oZWlnaHQ7IGkrKykge1xuICAgICAgICBjb25zdCBhcnJJdGVtOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMud2lkdGg7IGorKykge1xuICAgICAgICAgIGFyckl0ZW0ucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICBhcnIucHVzaChhcnJJdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlQ2VsbFN0YXRlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5hcnJTdGF0ZVt5XVt4XSA9IHRoaXMuYXJyU3RhdGVbeV1beF0gPT09IDAgPyAxIDogMDtcbiAgICByZXR1cm4gdGhpcy5hcnJTdGF0ZTtcbiAgfVxuXG4gIGlzQ2VsbEFsaXZlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgaWYgKFxuICAgICAgeSA8IDAgfHxcbiAgICAgIHkgPj0gdGhpcy5hcnJTdGF0ZS5sZW5ndGggfHxcbiAgICAgICh4IDwgMCAmJiB4IDwgdGhpcy5hcnJTdGF0ZVt5XS5sZW5ndGgpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBCb29sZWFuKHRoaXMuYXJyU3RhdGVbeV1beF0pO1xuICB9XG5cbiAgZ2V0TnVtYmVyT2ZOZWlnaGJvdXIoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBsZXQgbnVtID0gMDtcbiAgICBmb3IgKGxldCBpID0geSAtIDE7IGkgPD0geSArIDE7IGkrKykge1xuICAgICAgZm9yIChsZXQgayA9IHggLSAxOyBrIDw9IHggKyAxOyBrKyspIHtcbiAgICAgICAgaWYgKGkgPT09IHkgJiYgayA9PT0geCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG51bSArPSBOdW1iZXIodGhpcy5pc0NlbGxBbGl2ZShrLCBpKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudW07XG4gIH1cblxuICBnZXROZXh0Q2VsbFN0YXRlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgY29uc3QgbGl2ZUNvdW50ID0gdGhpcy5nZXROdW1iZXJPZk5laWdoYm91cih4LCB5KTtcbiAgICBjb25zdCBpc0FsaXZlID0gdGhpcy5pc0NlbGxBbGl2ZSh4LCB5KTtcbiAgICBpZiAoKGlzQWxpdmUgJiYgKGxpdmVDb3VudCA9PT0gMyB8fCBsaXZlQ291bnQgPT09IDIpKSB8fCBsaXZlQ291bnQgPT09IDMpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHNldFNpemUobmV3V2lkdGg6IG51bWJlciwgbmV3SGVpZ2h0OiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyU3RhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGsgPSB0aGlzLmFyclN0YXRlW2ldLmxlbmd0aDsgayA8IG5ld1dpZHRoOyBrKyspIHtcbiAgICAgICAgdGhpcy5hcnJTdGF0ZVtpXVtrXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdXaWR0aCA8IHRoaXMuYXJyU3RhdGVbaV0ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYXJyU3RhdGVbaV0uc3BsaWNlKG5ld1dpZHRoLCB0aGlzLmFyclN0YXRlW2ldLmxlbmd0aCAtIG5ld1dpZHRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3SGVpZ2h0IDwgdGhpcy5hcnJTdGF0ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuYXJyU3RhdGUuc3BsaWNlKG5ld0hlaWdodCwgdGhpcy5hcnJTdGF0ZS5sZW5ndGggLSBuZXdIZWlnaHQpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSB0aGlzLmFyclN0YXRlLmxlbmd0aDsgaSA8IG5ld0hlaWdodDsgaSsrKSB7XG4gICAgICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5ld1dpZHRoOyBqKyspIHtcbiAgICAgICAgYXJyLnB1c2goMCk7XG4gICAgICB9XG4gICAgICB0aGlzLmFyclN0YXRlLnB1c2goYXJyKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgSUdhbWVWaWV3IHtcbiAgdXBkYXRlR2FtZUZpZWxkOiAoZmllbGQ6IG51bWJlcltdW10pID0+IHZvaWQ7XG4gIHVwZGF0ZUdhbWVTdGF0ZTogKHN0YXRlOiB7XG4gICAgd2lkdGg/OiBudW1iZXI7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGlzUnVubmluZz86IGJvb2xlYW47XG4gIH0pID0+IHZvaWQ7XG4gIG9uQ2VsbENsaWNrOiAoY2I6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gdm9pZCkgPT4gdm9pZDtcbiAgb25HYW1lU3RhdGVDaGFuZ2U6IChjYjogKG5ld1N0YXRlOiBib29sZWFuKSA9PiB2b2lkKSA9PiB2b2lkO1xuICBvbkZpZWxkU2l6ZUNoYW5nZTogKGNiOiAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHZvaWQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lVmlldyBpbXBsZW1lbnRzIElHYW1lVmlldyB7XG4gIGVsOiBIVE1MRWxlbWVudDtcbiAgY29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZChcImdhbWVGaWVsZFwiKTtcbiAgICBlbC5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xuXG4gICAgY29uc3QgZ2FtZUNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBnYW1lQ29udHJvbHMuY2xhc3NMaXN0LmFkZChcImdhbWVDb250cm9sc1wiKTtcbiAgICBlbC5hcHBlbmRDaGlsZChnYW1lQ29udHJvbHMpO1xuXG4gICAgY29uc3QgYnV0dG9uU3RvcHBlZDogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvblN0b3BwZWQuY2xhc3NMaXN0LmFkZChcInJ1bi1idXR0b25cIik7XG4gICAgYnV0dG9uU3RvcHBlZC5jbGFzc0xpc3QuYWRkKFwicnVuLWJ1dHRvbi0tc3RvcHBlZFwiKTtcbiAgICBidXR0b25TdG9wcGVkLmlubmVySFRNTCA9IFwiUGxheVwiO1xuICAgIGdhbWVDb250cm9scy5hcHBlbmRDaGlsZChidXR0b25TdG9wcGVkKTtcblxuICAgIGNvbnN0IGJ1dHRvbkNsZWFuOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnV0dG9uQ2xlYW4uY2xhc3NMaXN0LmFkZChcImNsZWFuLWJ1dHRvblwiKTtcbiAgICAvL2J1dHRvblN0b3BwZWQuY2xhc3NMaXN0LmFkZChcInJ1bi1idXR0b24tLXN0b3BwZWRcIik7XG4gICAgLy9idXR0b25DbGVhbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgYnV0dG9uQ2xlYW4uaW5uZXJIVE1MID0gXCJDbGVhblwiO1xuICAgIGdhbWVDb250cm9scy5hcHBlbmRDaGlsZChidXR0b25DbGVhbik7XG5cbiAgICBjb25zdCBpbnB1dFNpemVXaWR0aDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXRTaXplV2lkdGguY2xhc3NMaXN0LmFkZChcImZpZWxkLXNpemVcIik7XG4gICAgaW5wdXRTaXplV2lkdGguY2xhc3NMaXN0LmFkZChcImZpZWxkLXNpemUtLXdpZHRoXCIpO1xuICAgIGlucHV0U2l6ZVdpZHRoLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJudW1iZXJcIik7XG4gICAgZ2FtZUNvbnRyb2xzLmFwcGVuZENoaWxkKGlucHV0U2l6ZVdpZHRoKTtcblxuICAgIGNvbnN0IGlucHV0U2l6ZUhlaWdodDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXRTaXplSGVpZ2h0LmNsYXNzTGlzdC5hZGQoXCJmaWVsZC1zaXplXCIpO1xuICAgIGlucHV0U2l6ZUhlaWdodC5jbGFzc0xpc3QuYWRkKFwiZmllbGQtc2l6ZS0taGVpZ2h0XCIpO1xuICAgIGlucHV0U2l6ZUhlaWdodC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xuICAgIGdhbWVDb250cm9scy5hcHBlbmRDaGlsZChpbnB1dFNpemVIZWlnaHQpO1xuXG4gICAgY29uc3QgaW5wdXRTcGVlZDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpbnB1dFNwZWVkLmNsYXNzTGlzdC5hZGQoXCJmaWVsZC1zcGVlZFwiKTtcbiAgICBpbnB1dFNwZWVkLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYW5nZVwiKTtcbiAgICBpbnB1dFNwZWVkLnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjFcIik7XG4gICAgaW5wdXRTcGVlZC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgXCI1MDAwXCIpO1xuICAgIGlucHV0U3BlZWQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBcIjEwXCIpO1xuICAgIGlucHV0U3BlZWQudmFsdWUgPSBcIjUwMFwiO1xuICAgIGdhbWVDb250cm9scy5hcHBlbmRDaGlsZChpbnB1dFNwZWVkKTtcblxuICAgIHRoaXMuZWwgPSBlbDtcbiAgfVxuICB1cGRhdGVHYW1lRmllbGQoZmllbGQ6IG51bWJlcltdW10pIHtcbiAgICBjb25zdCBnYW1lRmllbGRFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5nYW1lRmllbGRcIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgZ2FtZUZpZWxkRWwuaW5uZXJIVE1MID0gYDx0YWJsZT5cbiAgICAgIDx0Ym9keT4ke2ZpZWxkXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgKHJvdywgeSkgPT5cbiAgICAgICAgICAgIGA8dHI+JHtyb3dcbiAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAoY2VsbCwgeCkgPT5cbiAgICAgICAgICAgICAgICAgIGA8dGQgY2xhc3M9XCJjZWxsIGNlbGwtLSR7Y2VsbCA/IFwiYWxpdmVcIiA6IFwiZGVhZFwifVwiPjwvdGQ+YFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICA8L3RyPmBcbiAgICAgICAgKVxuICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgIDwvdGJvZHk+XG4gICAgPC90YWJsZT5gO1xuICB9XG5cbiAgdXBkYXRlR2FtZVN0YXRlKHN0YXRlOiB7XG4gICAgaXNSdW5uaW5nPzogYm9vbGVhbjtcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gIH0pIHtcbiAgICBjb25zdCBidXR0b25SdW4gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucnVuLWJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBpbnB1dFNpemVIZWlnaHQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcImlucHV0LmZpZWxkLXNpemUtLWhlaWdodFwiXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGlucHV0U2l6ZVdpZHRoID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJpbnB1dC5maWVsZC1zaXplLS13aWR0aFwiXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGlmIChzdGF0ZS5pc1J1bm5pbmcpIHtcbiAgICAgIGJ1dHRvblJ1bj8uY2xhc3NMaXN0LnJlbW92ZShcInJ1bi1idXR0b24tLXN0b3BwZWRcIik7XG4gICAgICBidXR0b25SdW4/LmNsYXNzTGlzdC5hZGQoXCJydW4tYnV0dG9uLS1ydW5uZWRcIik7XG4gICAgICBidXR0b25SdW4uaW5uZXJIVE1MID0gXCJTdG9wXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvblJ1bj8uY2xhc3NMaXN0LnJlbW92ZShcInJ1bi1idXR0b24tLXJ1bm5lZFwiKTtcbiAgICAgIGJ1dHRvblJ1bj8uY2xhc3NMaXN0LmFkZChcInJ1bi1idXR0b24tLXN0b3BwZWRcIik7XG4gICAgICBidXR0b25SdW4uaW5uZXJIVE1MID0gXCJQbGF5XCI7XG4gICAgfVxuICAgIGlmICghKHN0YXRlLndpZHRoID09PSB1bmRlZmluZWQgfHwgc3RhdGUuaGVpZ2h0ID09PSB1bmRlZmluZWQpKSB7XG4gICAgICBpbnB1dFNpemVXaWR0aC52YWx1ZSA9IHN0YXRlLndpZHRoLnRvU3RyaW5nKCk7XG4gICAgICBpbnB1dFNpemVIZWlnaHQudmFsdWUgPSBzdGF0ZS5oZWlnaHQudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cblxuICBvbkNlbGxDbGljayhjYjogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgZ2FtZUZpZWxkRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FtZUZpZWxkXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgIGZ1bmN0aW9uIGNhbGxDYldpdGhBcmdzKGVsOiBhbnkpIHtcbiAgICAgIGlmIChlbC50YXJnZXQudGFnTmFtZSA9PT0gXCJURFwiKSB7XG4gICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGVsLnRhcmdldC5jZWxsSW5kZXg7XG4gICAgICAgIGNvbnN0IHg6IG51bWJlciA9IGVsLnRhcmdldC5jbG9zZXN0KFwidHJcIikucm93SW5kZXg7XG4gICAgICAgIGNiKHksIHgpO1xuICAgICAgfVxuICAgIH1cbiAgICBnYW1lRmllbGRFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FsbENiV2l0aEFyZ3MsIHRydWUpO1xuICB9XG5cbiAgb25HYW1lU3RhdGVDaGFuZ2UoY2I6IChuZXdTdGF0ZTogYm9vbGVhbikgPT4gdm9pZCkge1xuICAgIGNvbnN0IGJ1dHRvblJ1biA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5ydW4tYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGZ1bmN0aW9uIGNhbGxDYlN0YXRlQ2hhbmdlKGVsOiBhbnkpIHtcbiAgICAgIGNvbnN0IG5ld1N0YXRlOiBib29sZWFuID0gYnV0dG9uUnVuLmNsYXNzTGlzdC5jb250YWlucyhcbiAgICAgICAgXCJydW4tYnV0dG9uLS1zdG9wcGVkXCJcbiAgICAgICk7XG4gICAgICBjYihuZXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgYnV0dG9uUnVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYWxsQ2JTdGF0ZUNoYW5nZSk7XG4gIH1cblxuICBvbkZpZWxkU2l6ZUNoYW5nZShjYjogKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgaW5wdXRXaWR0aCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmZpZWxkLXNpemUuZmllbGQtc2l6ZS0td2lkdGhcIlxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBpbnB1dEhlaWdodCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmZpZWxkLXNpemUuZmllbGQtc2l6ZS0taGVpZ2h0XCJcbiAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZWw6IEhUTUxFbGVtZW50ID0gdGhpcy5lbDtcbiAgICBmdW5jdGlvbiBjYlNpemVDaGFuZ2UoKSB7XG4gICAgICBjb25zdCB3aWR0aDogbnVtYmVyID0gTnVtYmVyKGlucHV0V2lkdGgudmFsdWUpO1xuICAgICAgY29uc3QgaGVpZ2h0OiBudW1iZXIgPSBOdW1iZXIoaW5wdXRIZWlnaHQudmFsdWUpO1xuICAgICAgaWYgKHdpZHRoID4gMCAmJiBoZWlnaHQgPiAwKSB7XG4gICAgICAgIGNiKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpbnB1dFdpZHRoLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2JTaXplQ2hhbmdlLCB0cnVlKTtcbiAgICBpbnB1dEhlaWdodC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNiU2l6ZUNoYW5nZSwgdHJ1ZSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vY3NzL3N0eWxlLmNzc1wiO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL0dhbWVcIjtcbmltcG9ydCB7IEdhbWVGaWVsZCB9IGZyb20gXCIuL0dhbWVGaWVsZFwiO1xuaW1wb3J0IHsgR2FtZVZpZXcgfSBmcm9tIFwiLi9HYW1lVmlld1wiO1xuXG5jb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpIGFzIEhUTUxFbGVtZW50O1xuXG5jb25zdCBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhlbCk7XG5jb25zdCBnYW1lRmllbGQgPSBuZXcgR2FtZUZpZWxkKDUsIDUpO1xubmV3IEdhbWUoZ2FtZUZpZWxkLCBnYW1lVmlldyk7XG4iXSwibmFtZXMiOlsiR2FtZSIsInN0YXRlIiwiZ2FtZUZpZWxkIiwiaW5wdXRSYW5nZSIsImRvY3VtZW50Iiwic3RlcER1cmF0aW9uTXMiLCJOdW1iZXIiLCJpc0dhbWVSdW4iLCJidXR0b25DbGVhbiIsImFsbExpdmVDZWxscyIsIml0ZW0iLCJpIiwiaiIsImdhbWVWaWV3IiwiaGVpZ2h0IiwiaXNSdW5uaW5nIiwid2lkdGgiLCJsZW5ndGgiLCJuZXdTdGF0ZSIsImdhbWVSdW5TdGF0ZSIsIm51bWJlck9mTGl2aW5nQ2VsbHMiLCJzdGF0ZUNvcnJlbnQiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIkdhbWVGaWVsZCIsIm5leHRHZW5lcmF0aW9uQXJyIiwibmV4dEdlbmVyYXRpb25BcnJTdHIiLCJhcnJTdGF0ZUJlZm9yZSIsImFyciIsImFyckl0ZW0iLCJ5IiwieCIsIkJvb2xlYW4iLCJudW0iLCJrIiwibGl2ZUNvdW50IiwiaXNBbGl2ZSIsIm5ld1dpZHRoIiwibmV3SGVpZ2h0IiwiR2FtZVZpZXciLCJlbCIsImdhbWVDb250cm9scyIsImJ1dHRvblN0b3BwZWQiLCJpbnB1dFNpemVXaWR0aCIsImlucHV0U2l6ZUhlaWdodCIsImlucHV0U3BlZWQiLCJnYW1lRmllbGRFbCIsImNlbGwiLCJidXR0b25SdW4iLCJjYiIsImlucHV0V2lkdGgiLCJpbnB1dEhlaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///272\n')}},__webpack_exports__={};__webpack_modules__[272]()})();